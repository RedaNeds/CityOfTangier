---
// Itinerary Actions Component
---

<div class="mt-12 text-center">
  <h3 class="text-2xl font-bold text-gray-900 mb-6">Save This Itinerary</h3>
  <div class="flex flex-wrap justify-center gap-4">
    <button 
      id="save-to-phone" 
      class="bg-teal-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-teal-700 transition-colors"
    >
      üì± Save to Phone
    </button>
    <button 
      id="email-itinerary" 
      class="bg-gray-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-700 transition-colors"
    >
      üìß Email Itinerary
    </button>
    <button 
      id="view-on-map" 
      class="bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors"
    >
      üó∫Ô∏è View on Map
    </button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Save to Phone functionality
    const saveToPhoneBtn = document.getElementById('save-to-phone');
    if (saveToPhoneBtn) {
      saveToPhoneBtn.addEventListener('click', function() {
        // Generate a simple text version of the itinerary
        const itineraryText = generateItineraryText();
        
        // Create a blob and download it
        const blob = new Blob([itineraryText], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'tangier-itinerary.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
      });
    }
    
    // Email Itinerary functionality
    const emailItineraryBtn = document.getElementById('email-itinerary');
    if (emailItineraryBtn) {
      emailItineraryBtn.addEventListener('click', function() {
        const subject = encodeURIComponent('Tangier 24-Hour Itinerary');
        const body = encodeURIComponent(generateItineraryText());
        window.location.href = `mailto:?subject=${subject}&body=${body}`;
      });
    }
    
    // View on Map functionality
    const viewOnMapBtn = document.getElementById('view-on-map');
    if (viewOnMapBtn) {
      viewOnMapBtn.addEventListener('click', function() {
        // For now, redirect to the map page
        // In a real implementation, you might want to show a modal with an embedded map
        window.location.href = '/map';
      });
    }
    
    function generateItineraryText() {
      return `Tangier in 24 Hours - Perfect One Day Itinerary

Morning (8:00 AM - 12:00 PM)
1. Kasbah Museum (1.5 hours, ‚Ç¨3)
   - Start your day exploring Morocco's rich history
   - Best time: 8:00-9:30 AM

2. Medina Walking Tour (2 hours, Free)
   - Wander through narrow streets and traditional souks
   - Best time: 9:30-11:30 AM

Afternoon (12:00 PM - 6:00 PM)
3. Lunch at Caf√© Hafa (1 hour, ‚Ç¨8-12)
   - Traditional mint tea with sea views
   - Best time: 12:00-1:00 PM

4. Cap Spartel Lighthouse (1 hour, ‚Ç¨5)
   - Historic lighthouse at the meeting of two seas
   - Best time: 2:00-3:00 PM

5. Hercules Caves (1.5 hours, ‚Ç¨3)
   - Legendary cave with natural ocean window
   - Best time: 3:00-4:30 PM

Evening (6:00 PM - 8:00 PM)
6. Sunset at Achakar Beach (1 hour, Free)
   - Relax and watch the spectacular sunset
   - Best time: 6:00-7:00 PM

7. Dinner at Restaurant Saveur de Poisson (1.5 hours, ‚Ç¨20-30)
   - Fresh seafood and traditional Moroccan dishes
   - Best time: 7:30-9:00 PM

Total Budget: ‚Ç¨50-80
Total Duration: 12 hours
Difficulty: Easy

Essential Tips:
- Wear comfortable walking shoes
- Bring cash for small purchases
- Book restaurants in advance
- Check sunset times

Transportation:
- Taxis: ‚Ç¨5-10 between attractions
- Walking: Best for Medina and city center
- Bus: ‚Ç¨1 for longer distances

Generated by City of Tangier - https://cityoftangier.com`;
    }
  });
</script>
