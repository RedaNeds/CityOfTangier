---
import BaseLayout from './BaseLayout.astro';

export interface Props {
  title?: string;
  description?: string;
  category?: string;
  subcategory?: string;
  tags?: string[];
  featuredImage?: string;
  gallery?: string[];
  rating?: number;
  priceLevel?: string;
  location?: string;
  address?: string;
  coordinates?: {
    lat: number;
    lng: number;
  };
  highlights?: string[];
  contact?: {
    phone?: string;
    email?: string;
    website?: string;
  };
  amenities?: string[];
  accessibility?: {
    wheelchairAccessible?: boolean;
    parking?: boolean;
    wifi?: boolean;
  };
}

const { 
  title = "Place - City of Tangier", 
  description = "Discover amazing places in Tangier",
  category = "attraction",
  subcategory = "general",
  tags = [],
  featuredImage = "/place-default-image.jpg",
  gallery = [],
  rating = 4.5,
  priceLevel = "€€",
  location = "Tangier, Morocco",
  address = "",
  coordinates,
  highlights = [],
  contact = {},
  amenities = [],
  accessibility = {}
} = Astro.props;

// Generate structured data for places
const structuredData = {
  "@context": "https://schema.org",
  "@type": "TouristAttraction",
  "name": title,
  "description": description,
  "image": featuredImage,
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Tangier",
    "addressCountry": "Morocco",
    "streetAddress": address
  },
  "aggregateRating": rating ? {
    "@type": "AggregateRating",
    "ratingValue": rating,
    "bestRating": 5
  } : undefined,
  "keywords": tags.join(", "),
  "geo": coordinates ? {
    "@type": "GeoCoordinates",
    "latitude": coordinates.lat,
    "longitude": coordinates.lng
  } : undefined,
  "telephone": contact.phone,
  "email": contact.email,
  "url": contact.website
};
---

<BaseLayout 
  title={title} 
  description={description}
  ogImage={featuredImage}
  ogType="article"
>
  <!-- Place specific head content -->
  <Fragment slot="head">
    <!-- Place specific meta tags -->
    <meta name="place:category" content={category} />
    <meta name="place:subcategory" content={subcategory} />
    <meta name="place:rating" content={rating?.toString()} />
    <meta name="place:priceLevel" content={priceLevel} />
    <meta name="place:location" content={location} />
    {tags.map(tag => <meta name="place:tag" content={tag} />)}
    {highlights.map(highlight => <meta name="place:highlight" content={highlight} />)}
    {amenities.map(amenity => <meta name="place:amenity" content={amenity} />)}
    
    <!-- Structured data -->
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
    
    <!-- Place specific styles -->
    <style>
      body {
        padding-top: 4rem; /* pt-16 equivalent for fixed navbar */
      }
      
      /* Place card styles */
      .place-card {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        overflow: hidden;
      }
      
      .place-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1);
      }
      
      /* Rating stars */
      .rating-stars {
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }
      
      .star {
        color: #fbbf24;
        font-size: 1.125rem;
      }
      
      .star.empty {
        color: #d1d5db;
      }
      
      /* Price level indicators */
      .price-level {
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }
      
      .price-symbol {
        color: #10b981;
        font-weight: bold;
      }
      
      /* Category badges */
      .category-badge {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 500;
        text-transform: capitalize;
      }
      
      .subcategory-badge {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.875rem;
        font-weight: 500;
        text-transform: capitalize;
      }
      
      /* Tag chips */
      .tag-chip {
        background: #f3f4f6;
        color: #374151;
        padding: 0.25rem 0.5rem;
        border-radius: 0.375rem;
        font-size: 0.75rem;
        font-weight: 500;
        border: 1px solid #e5e7eb;
      }
      
      /* Highlights list */
      .highlights-list {
        list-style: none;
        padding: 0;
      }
      
      .highlights-list li {
        position: relative;
        padding-left: 1.5rem;
        margin-bottom: 0.5rem;
      }
      
      .highlights-list li::before {
        content: '✓';
        position: absolute;
        left: 0;
        color: #10b981;
        font-weight: bold;
      }
      
      /* Amenities list */
      .amenities-list {
        list-style: none;
        padding: 0;
      }
      
      .amenities-list li {
        position: relative;
        padding-left: 1.5rem;
        margin-bottom: 0.5rem;
      }
      
      .amenities-list li::before {
        content: '•';
        position: absolute;
        left: 0;
        color: #3b82f6;
        font-weight: bold;
      }
      
      /* Location info */
      .location-info {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
        padding: 1rem;
      }
      
      .location-icon {
        color: #3b82f6;
        margin-right: 0.5rem;
      }
      
      /* Contact info */
      .contact-info {
        background: #fefce8;
        border: 1px solid #fde047;
        border-radius: 0.5rem;
        padding: 1rem;
      }
      
      .contact-icon {
        color: #f59e0b;
        margin-right: 0.5rem;
      }
      
      /* Opening hours */
      .opening-hours {
        background: #f0f9ff;
        border: 1px solid #0ea5e9;
        border-radius: 0.5rem;
        padding: 1rem;
      }
      
      .hours-table {
        width: 100%;
        border-collapse: collapse;
      }
      
      .hours-table td {
        padding: 0.25rem 0;
        border-bottom: 1px solid #0ea5e9;
      }
      
      .hours-table td:first-child {
        font-weight: 500;
        color: #374151;
      }
      
      .hours-table td:last-child {
        color: #6b7280;
        text-align: right;
      }
      
      /* Image gallery */
      .image-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin: 1rem 0;
      }
      
      .gallery-item {
        aspect-ratio: 16/9;
        border-radius: 0.5rem;
        overflow: hidden;
        background: #f3f4f6;
        cursor: pointer;
        transition: transform 0.3s ease;
      }
      
      .gallery-item:hover {
        transform: scale(1.05);
      }
      
      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }
      
      .gallery-item:hover img {
        transform: scale(1.1);
      }
      
      /* Accessibility indicators */
      .accessibility-info {
        background: #f0fdf4;
        border: 1px solid #22c55e;
        border-radius: 0.5rem;
        padding: 1rem;
      }
      
      .accessibility-item {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
      }
      
      .accessibility-icon {
        color: #22c55e;
        margin-right: 0.5rem;
      }
      
      /* Action buttons */
      .action-buttons {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
      }
      
      .btn-primary {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }
      
      .btn-primary:hover {
        background: linear-gradient(135deg, #1d4ed8, #1e40af);
        transform: translateY(-1px);
      }
      
      .btn-secondary {
        background: white;
        color: #374151;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        border: 1px solid #d1d5db;
        cursor: pointer;
      }
      
      .btn-secondary:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }
      
      .btn-contact {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }
      
      .btn-contact:hover {
        background: linear-gradient(135deg, #d97706, #b45309);
        transform: translateY(-1px);
      }
      
      /* Responsive adjustments */
      @media (max-width: 768px) {
        .action-buttons {
          flex-direction: column;
        }
        
        .btn-primary,
        .btn-secondary,
        .btn-contact {
          width: 100%;
          text-align: center;
        }
        
        .image-gallery {
          grid-template-columns: 1fr;
        }
      }
      
      /* Print styles */
      @media print {
        .place-card {
          box-shadow: none;
          border: 1px solid #e5e7eb;
        }
        
        .action-buttons {
          display: none;
        }
      }
    </style>
  </Fragment>

  <!-- Place specific content -->
  <div class="place-content">
    <slot />
  </div>
</BaseLayout>
