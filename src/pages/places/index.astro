---
import HomeLayout from '../../layouts/HomeLayout.astro';
import { getCollection } from 'astro:content';

// Get featured places
const featuredPlaces = await getCollection('places');
const topPlaces = featuredPlaces.slice(0, 6); // Get first 6 places as featured
---

<HomeLayout 
  title="Places to Visit in Tangier - City of Tangier"
  description="Discover the best places to visit in Tangier. From historic kasbahs to modern cafes, find your perfect spots in Morocco's gateway city."
>
  <div class="max-w-7xl mx-auto px-4 py-16">
    <!-- Header -->
    <div class="text-center mb-16">
      <h1 class="text-5xl font-serif font-bold text-gray-900 mb-6">Places to Visit</h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        Discover the best places in Tangier. From ancient kasbahs to modern rooftops, 
        find your perfect spots in Morocco's gateway city.
      </p>
      <div class="mt-6 flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href="/places/sanity" 
          class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors"
        >
          üéõÔ∏è Manage Places (Sanity CMS)
        </a>
        <a 
          href="http://localhost:3333" 
          target="_blank" 
          rel="noopener noreferrer"
          class="inline-block bg-gray-100 text-gray-700 border border-gray-300 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors"
        >
          üìù Open Sanity Studio
        </a>
      </div>
    </div>

    <!-- Interactive Map Section -->
    <div class="bg-white rounded-2xl border border-[#F0F0F0] p-8 mb-16">
      <h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">Interactive Map</h2>
      <div class="bg-gray-100 rounded-xl h-96 flex items-center justify-center">
        <div class="text-center">
          <div class="text-6xl mb-4">üó∫Ô∏è</div>
          <p class="text-gray-600 text-lg">Interactive map coming soon</p>
          <p class="text-gray-500">Filter by category, neighborhood, or type</p>
        </div>
      </div>
    </div>

    <!-- Categories Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
      <!-- Eat & Drink -->
      <div class="bg-white rounded-2xl border border-[#F0F0F0] overflow-hidden transition-all">
        <div class="h-48 bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center">
          <div class="text-center text-white">
            <div class="text-4xl mb-2">üçΩÔ∏è</div>
            <h3 class="text-xl font-bold">Eat & Drink</h3>
          </div>
        </div>
        <div class="p-6">
          <h3 class="text-xl font-semibold mb-3">Eat & Drink</h3>
          <p class="text-gray-600 mb-4">From traditional Moroccan cuisine to modern cafes with sea views.</p>
          <div class="space-y-2">
            <a href="/places/eat-drink/rooftops" class="block text-teal-600 hover:text-teal-800">Rooftops</a>
            <a href="/places/eat-drink/sea-view-cafes" class="block text-teal-600 hover:text-teal-800">Sea-view Cafes</a>
            <a href="/places/eat-drink/moroccan-restaurants" class="block text-teal-600 hover:text-teal-800">Moroccan Restaurants</a>
            <a href="/places/eat-drink/seafood" class="block text-teal-600 hover:text-teal-800">Seafood</a>
          </div>
          <a href="/places/eat-drink" class="inline-block mt-4 text-teal-600 hover:text-teal-800 font-medium">
            View all ‚Üí
          </a>
        </div>
      </div>

      <!-- See & Do -->
      <div class="bg-white rounded-2xl border border-[#F0F0F0] overflow-hidden transition-all">
        <div class="h-48 bg-gradient-to-br from-blue-400 to-cyan-600 flex items-center justify-center">
          <div class="text-center text-white">
            <div class="text-4xl mb-2">üéØ</div>
            <h3 class="text-xl font-bold">See & Do</h3>
          </div>
        </div>
        <div class="p-6">
          <h3 class="text-xl font-semibold mb-3">See & Do</h3>
          <p class="text-gray-600 mb-4">Explore museums, beaches, photo spots, and nightlife.</p>
          <div class="space-y-2">
            <a href="/places/see-do/museums" class="block text-teal-600 hover:text-teal-800">Museums</a>
            <a href="/places/see-do/photo-spots" class="block text-teal-600 hover:text-teal-800">Photo Spots</a>
            <a href="/places/see-do/beaches" class="block text-teal-600 hover:text-teal-800">Beaches</a>
            <a href="/places/see-do/nightlife" class="block text-teal-600 hover:text-teal-800">Nightlife</a>
          </div>
          <a href="/places/see-do" class="inline-block mt-4 text-teal-600 hover:text-teal-800 font-medium">
            View all ‚Üí
          </a>
        </div>
      </div>

      <!-- Neighborhoods -->
      <div class="bg-white rounded-2xl border border-[#F0F0F0] overflow-hidden transition-all">
        <div class="h-48 bg-gradient-to-br from-purple-400 to-pink-600 flex items-center justify-center">
          <div class="text-center text-white">
            <div class="text-4xl mb-2">üèòÔ∏è</div>
            <h3 class="text-xl font-bold">Neighborhoods</h3>
          </div>
        </div>
        <div class="p-6">
          <h3 class="text-xl font-semibold mb-3">Neighborhoods</h3>
          <p class="text-gray-600 mb-4">Explore Tangier's distinct neighborhoods and their unique character.</p>
          <div class="space-y-2">
            <a href="/places/neighborhoods/kasbah" class="block text-teal-600 hover:text-teal-800">Kasbah</a>
            <a href="/places/neighborhoods/marshan" class="block text-teal-600 hover:text-teal-800">Marshan</a>
            <a href="/places/neighborhoods/medina" class="block text-teal-600 hover:text-teal-800">Medina</a>
            <a href="/places/neighborhoods/city-center" class="block text-teal-600 hover:text-teal-800">City Center</a>
          </div>
          <a href="/places/neighborhoods" class="inline-block mt-4 text-teal-600 hover:text-teal-800 font-medium">
            View all ‚Üí
          </a>
        </div>
      </div>
    </div>

    <!-- Featured Places -->
    {topPlaces && topPlaces.length > 0 && (
      <div class="mb-16">
        <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Featured Places</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {topPlaces.map(place => (
            <div class="bg-white rounded-2xl border border-[#F0F0F0] overflow-hidden transition-all hover:shadow-lg">
              {place.data.featuredImage && (
                <div class="h-48 bg-cover bg-center" style={`background-image: url(${place.data.featuredImage})`}>
                  <div class="h-full bg-black bg-opacity-30 flex items-end">
                    <div class="p-4 text-white">
                      <h3 class="text-lg font-semibold">{place.data.title}</h3>
                      <p class="text-sm opacity-90">{place.data.subcategory}</p>
                    </div>
                  </div>
                </div>
              )}
              <div class="p-6">
                <h3 class="text-xl font-semibold mb-2">
                  <a href={`/places/${place.slug}`} class="hover:text-teal-600">
                    {place.data.title}
                  </a>
                </h3>
                <p class="text-gray-600 text-sm mb-3 line-clamp-2">{place.data.description}</p>
                <div class="flex items-center justify-between mb-3">
                  <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium">
                    {place.data.category}
                  </span>
                  {place.data.rating && (
                    <div class="flex items-center">
                      <span class="text-sm text-gray-600 mr-1">{place.data.rating}</span>
                      <span class="text-yellow-400">‚òÖ</span>
                    </div>
                  )}
                </div>
                <a href={`/places/${place.slug}`} class="inline-block text-teal-600 hover:text-teal-800 font-medium">
                  Learn More ‚Üí
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    )}

    <!-- Quick Stats -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
      <div class="text-center">
        <div class="text-3xl font-bold text-teal-600 mb-2">150+</div>
        <div class="text-gray-600">Places</div>
      </div>
      <div class="text-center">
        <div class="text-3xl font-bold text-teal-600 mb-2">12</div>
        <div class="text-gray-600">Categories</div>
      </div>
      <div class="text-center">
        <div class="text-3xl font-bold text-teal-600 mb-2">4</div>
        <div class="text-gray-600">Neighborhoods</div>
      </div>
      <div class="text-center">
        <div class="text-3xl font-bold text-teal-600 mb-2">24/7</div>
        <div class="text-gray-600">Updated</div>
      </div>
    </div>
  </div>
</HomeLayout>
